<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="author" content="Preslav Rachev">
    <meta name="description" content="For quite some time, I have been fighting with Auth0 to get the app metadata I am storing for each user. It wasn&amp;rsquo;t easy, which is why I decided to document my steps." />
    <meta name="keywords" content="programming, golang, python, elixir, Tips, Programming, API, Auth0" />
    <meta name="robots" content="noodp" />
    <meta name="theme-color" content="" />
    <link rel="canonical" href="https://preslav.me/2020/05/17/auth0-struggles-access-a-signed-up-user-s-app-metadata/" />

    
    
    <title>Auth0 Struggles: Access A Signed-Up User&#39;s App Metadata  Â· Random Bits of Wisdom</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
    
    <link rel="stylesheet" href="https://preslav.me/style.main.min.f84d6c0bd7277a0da9d1f4e0e893918c0b07491e54e74d802499c473ec868f38.css" />
    <link rel="stylesheet" href="https://preslav.me/site.min.af179bcb4919068a7c5f6ed21056ad75fc124f28175c73b7cda6a453e488853e.css" />
    <link rel="me" href="https://twitter.com/preslavrachev">

    

    <meta itemprop="name" content="Auth0 Struggles: Access A Signed-Up User&#39;s App Metadata ">
<meta itemprop="description" content="For quite some time, I have been fighting with Auth0 to get the app metadata I am storing for each user. It wasn&#39;t easy, which is why I decided to document my steps.">


<meta itemprop="datePublished" content="2020-05-17T22:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-05-17T22:00:00&#43;00:00" />
<meta itemprop="wordCount" content="382">



<meta itemprop="keywords" content="Tips,Programming,API,Auth0," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Auth0 Struggles: Access A Signed-Up User&#39;s App Metadata "/>
<meta name="twitter:description" content="For quite some time, I have been fighting with Auth0 to get the app metadata I am storing for each user. It wasn&#39;t easy, which is why I decided to document my steps."/>

    <meta property="og:title" content="Auth0 Struggles: Access A Signed-Up User&#39;s App Metadata " />
<meta property="og:description" content="For quite some time, I have been fighting with Auth0 to get the app metadata I am storing for each user. It wasn&#39;t easy, which is why I decided to document my steps." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://preslav.me/2020/05/17/auth0-struggles-access-a-signed-up-user-s-app-metadata/" />
<meta property="article:published_time" content="2020-05-17T22:00:00+00:00" />
<meta property="article:modified_time" content="2020-05-17T22:00:00+00:00" />

    
    
    
    <meta name="twitter:image" content="https://preslav.me/images/2020/05/jon-moore-bbavss4zqca-unsplash.jpg">
    <meta property="og:image" content="https://preslav.me/images/2020/05/jon-moore-bbavss4zqca-unsplash.jpg">
    

    
    
    

    </head>
<body class=" post-template ">

    <div class="site-wrapper">

<header class="site-header"><div class="outer site-nav-main">
    <div class="inner"><nav class="site-nav">
    <div class="site-nav-left">
        
            <a class="site-nav-logo" href="https://preslav.me">Random Bits of Wisdom</a>
        
        
        <div class="site-nav-content">
            <ul class="nav" role="menu">
                
                <li class="nav-home" role="menuitem"><a href="/about/">About Me</a></li>
                
                <li class="nav-home" role="menuitem"><a href="/projects/">My Projects</a></li>
                
                <li class="nav-home" role="menuitem"><a href="/collections/">My Collections</a></li>
                
                <li class="nav-home" role="menuitem"><a href="/scratchpad/">Scratchpad</a></li>
                
            </ul>
        </div>
        
    </div>
</nav>

</div>
</div></header>

<main id="site-main" class="site-main outer">
    <div class="inner">

        <article
            class="post-full post  no-image ">

            <header class="post-full-header">

                
                
                <section class="post-full-tags">
                    <a
                        href="/tags/tips">Tips</a>
                </section>
                

                <h1 class="post-full-title">Auth0 Struggles: Access A Signed-Up User&#39;s App Metadata </h1>

                

                <div class="post-full-byline">
                    <section class="post-full-byline-content">

                        <ul class="author-list">
    <li class="author-list-item">
        <div class="author-card">
            <div class="author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></div>
            <div class="author-info">
                <div class="author-info">
                    <h2>Preslav Rachev</h2>
                </div>
            </div>
        </div>
        <a href="#" class="author-avatar author-profile-image"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"/></g></svg></a>
    </li>
</ul>

                        <section class="post-full-byline-meta">
                            
                            <h4 class="author-name">Preslav Rachev</h4>
                            
                            <div class="byline-meta-content">
                                <time class="byline-meta-date"
                                    datetime="2020-105-05">17 May 2020</time>
                            </div>
                            <div class="byline-meta-content">
                                <span class="byline-reading-time"
                                    style="font-size: 1rem">
                                    2 min read</span>
                            </div>
                        </section>

                    </section>
                    <div class="byline-meta-content">
                        
                        <a class="resp-sharing-button__link"
                            href="https://twitter.com/intent/tweet/?text=Auth0%20Struggles%3a%20Access%20A%20Signed-Up%20User%27s%20App%20Metadata%20&amp;url=https%3a%2f%2fpreslav.me%2f2020%2f05%2f17%2fauth0-struggles-access-a-signed-up-user-s-app-metadata%2f&amp;via=preslavrachev"
                            target="_blank" rel="noopener" aria-label="">
                            <div
                                class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small">
                                <div aria-hidden="true"
                                    class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        viewBox="0 0 24 24"
                                        style="width: 20px; height: 20px">
                                        <path
                                            d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z" />
                                    </svg>
                                </div>
                            </div>
                        </a>
                        
                        <a class="resp-sharing-button__link"
                            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fpreslav.me%2f2020%2f05%2f17%2fauth0-struggles-access-a-signed-up-user-s-app-metadata%2f"
                            target="_blank" rel="noopener" aria-label="">
                            <div
                                class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small">
                                <div aria-hidden="true"
                                    class="resp-sharing-button__icon resp-sharing-button__icon--solid">
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                        style="width: 20px; height: 20px"
                                        viewBox="0 0 24 24">
                                        <path
                                            d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z" />
                                    </svg>
                                </div>
                            </div>
                        </a>

                    </div>
                </div>
            </header>

            
            <figure class="post-full-image">
                <img src="/images/2020/05/jon-moore-bbavss4zqca-unsplash.jpg" alt="Auth0 Struggles: Access A Signed-Up User&#39;s App Metadata " />
            </figure>
            

            <section class="post-full-content">
                <div class="post-content">
                    

<p>For quite some time, I have been fighting with <a href="https://auth0.com/">Auth0</a> to get the app metadata I am storing for each user. For those new to Auth0, app metadata is a convenience object that allows the storing of read-only data for each user (e.g. API keys, which plan they are on, progress within application, etc).</p>








<div class="embed"
  style="display:flex; flex-wrap: wrap; border: 1px solid #d4d4d4; width:100%; margin-bottom: 1rem">

  
  <div class="embed-image"
    style="flex:1; background: url(https://cdn.auth0.com/website/homepage/tc/twitter-card-en.png); background-size:cover; background-position:center; min-height: 120px">
  </div>
  

  <div class="embed-content" style="flex:3; padding: 1rem;"><a
      href="https://auth0.com">
      <div class="title"
        style="font-weight: 800; margin-bottom: 1rem; font-size:120%">
        Auth0: Identity is Complex. Deal with it.</div>
    </a>
    <div class="embed-description" style="margin-bottom:1rem; font-size:80%">
      Rapidly integrate authentication and authorization for web, mobile, and legacy applications so you can focus on your core business.</div>
    <div class="embed-meta" style="font-size:60%">
      <div style="float:left; max-width:80%"><a
          href="https://auth0.com">https://auth0.com | </a></div>
      <div style="float: right">Created with <a
          href="https://linqable.pro/">Linqable</a></div>
    </div>
  </div>
</div>

<p>After successfully managing to integrate Auth0 in my current project, I realized that the user profile information available after a user signs up/in, does not contain the app metadata I need. These metadata are only available in <a href="https://auth0.com/docs/users/guides/manage-users-using-the-management-api">Auth0&rsquo;s Management API</a>, i.e. only available with client ID/Secret credentials (and rightly so).</p>

<h1 id="obtain-a-management-api-access-token">Obtain a Management API access token</h1>

<pre><code class="language-bash">curl --request POST \
  --url https://[YOUR_TENANT].eu.auth0.com/oauth/token \
  --header 'content-type: application/json' \
  -- data '{&quot;client_id&quot;: &quot;YOUR_CLIENT_ID&quot;, &quot;client_secret&quot;: &quot;YOUR_CLIENT_SECRET&quot;, audience: &quot;YOUR_AUDIENCE&quot;, &quot;grant_type&quot;:&quot;client_credentials&quot;}'
</code></pre>

<p>Audience will likely look like this: <code>https://[YOUR_TENANT].[ZONE, e.g. eu].auth0.com/api/v2</code></p>

<p>if everything is successful, you will receive a response from Auth0, containing an access token:</p>

<pre><code class="language-json">{
	&quot;access_token&quot;: &quot;abcd1234&quot;,
	&quot;token_type&quot;: &quot;Bearer&quot;
} 
</code></pre>

<p>This is the point to make a pause and say that you might instead get various errors. One very common is this:</p>

<pre><code>Client is not authorized to access \&quot;https://[YOUR_TENANT].eu.auth0.com/api/v2/\&quot;
</code></pre>

<p>In simple words, this means that your Auth0 application might not have been attached to the Auth0 Management API. To do so, go to <code>APIs &gt; Auth0 Management API &gt; Machine to Machine Applications</code> and see if your application is in the list (add if not), and if the &ldquo;Authorized&rdquo; toggle has been turned on.</p>

<p>While you are there, expand the item of your application in this list, and select the grants that you want to give it. My advice is to be on the safe side and choose the minimal number of grants you need. In my case, this would be <code>read:users</code> only.</p>

<p><img src="/images/2020/05/auth0-permissions.png" alt="" /></p>

<p>If you don&rsquo;t do so, you might end up getting another error, namely:</p>

<pre><code>Client has not been granted scopes: read:users
</code></pre>

<h1 id="obtaining-the-app-metadata">Obtaining the app metadata</h1>

<p>Once we have obtained our access token, <a href="https://auth0.com/docs/api/management/v2#!/Users/get_users_by_id">getting the app metadata</a> out of the available user information is easy:</p>

<pre><code class="language-bash">curl -H &quot;Authorization: Bearer abcd1234&quot; [https://[YOUR_TENANT].eu.auth0.com/api/v2/users/1234](https://prs.eu.auth0.com/api/v2/users/1234)
</code></pre>

<p>For reference, <a href="https://auth0.com/docs/api/management/v2#!/Users/get_users_by_id">check out the full Management API Docs</a>.</p>

                </div>
            </section>

        </article>
        <div id="graphcomment"></div>
        <script type="text/plain" cookie-consent="tracking">

          /* - - - CONFIGURATION VARIABLES - - - */
        
          // make sure the id is yours
          window.gc_params = {
            graphcomment_id: 'preslav-me',
        
            // if your website has a fixed header, indicate it's height in pixels
            fixed_header_height: 0,
          };
        
          /* - - - DON'T EDIT BELOW THIS LINE - - - */
        
          
          (function() {
            var gc = document.createElement('script'); gc.type = 'text/javascript'; gc.async = true;
            gc.src = 'https://graphcomment.com/js/integration.js?' + Math.round(Math.random() * 1e8);
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(gc);
          })();
        
        </script>
    </div>
    </div>
</main>
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
    
    <article class="read-next-card">
        <header class="read-next-card-header">
            <h3><span>More in</span> <a href="/tags/tips">Tips</a></h3>
        </header>
        <div class="read-next-card-content">
            <ul>
                
            </ul>
        </div>
    </article>


    
    


<article class="post-card post
 no-image
 ">

        
    
        <div class="post-card-content">
            
    
            <a class="post-card-content-link" href="https://preslav.me/2020/05/17/if-i-could-bring-one-thing-back-to-the-internet-it-would-be-blogs/">
    
                <header class="post-card-header">
                    
                        
                        <div class="post-card-primary-tag">Quote</div>
                    

                    <h2 class="post-card-title">If I could bring one thing back to the internet it would be blogs</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>When you search for blogs now on you see things like &lsquo;Top 100 Blogs.&rsquo; &lsquo;How to Make a Successful Blog.&rsquo; &lsquo;Most Powerful 50 Blogs.&rsquo; But what you really want is 10,000 unsuccessful blogs. Web search now suggests ideas for your blogs to get views, shares, indexed, but what you really want is no ideas. It&rsquo;s almost impossible now to find a blog that&rsquo;s not on a focused theme because that&rsquo;s what search engines focus on and how websites profit. But you want the opposite, a blog that never tried to focus or even thought about it.</p>
                </section>
    
            </a>

            <footer class="post-card-meta">
                    <div class="post-card-byline-content">
                        <span class="post-card-byline-date"><time datetime="2020-75-05">17 May 2020</time>
                            <span class="bull">&bull;</span> 2 min read</span>
                    </div>
                </footer>
    
        </div>

</article>
    

            


<article class="post-card post


 ">

        
            <a class="post-card-image-link" href="https://preslav.me/2020/05/19/on-notion-going-the-growth-path.not-sure-i-like-it/">
                <img class="post-card-image"src="https://images.unsplash.com/photo-1562380156-9a99cd92484c?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1280&amp;q=80" alt="On Notion Going the Growth Path. Not Sure I Like It"/>
            </a>
        
    
        <div class="post-card-content">
            
    
            <a class="post-card-content-link" href="https://preslav.me/2020/05/19/on-notion-going-the-growth-path.not-sure-i-like-it/">
    
                <header class="post-card-header">
                    
                        
                        <div class="post-card-primary-tag">2 Cents</div>
                    

                    <h2 class="post-card-title">On Notion Going the Growth Path. Not Sure I Like It</h2>
                </header>
    
                <section class="post-card-excerpt">
                    <p>Diluting the market proposition might push loyal customers away. Though, who cares about paying customers anyway?</p>
                </section>
    
            </a>

            <footer class="post-card-meta">
                    <div class="post-card-byline-content">
                        <span class="post-card-byline-date"><time datetime="2020-105-05">19 May 2020</time>
                            <span class="bull">&bull;</span> 2 min read</span>
                    </div>
                </footer>
    
        </div>

</article>
    
        </div>
    </div>
</aside>


        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://preslav.me">Random Bits of Wisdom</a> &copy; 2020</section>
                <nav class="site-footer-nav">
                    <a href="https://preslav.me">Latest Posts</a>
                    
                    <a href="https://twitter.com/preslavrachev" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://github.com/preslavrachev" target="_blank" rel="noopener">Github</a>
                    <a href="/privacy" target="_blank" rel="noopener">Privacy</a>
                    <a href="https://jonathanjanssens.com" target="_blank" rel="noopener" style="opacity: 0.5;">Hugo Casper3 by Jonathan Janssens</a>
                </nav>
            </div>
        </footer>

    </div>

    



<script type="text/javascript" src="/bundle.min.4889ca4b1ec2b9280d608e428cfe323e10ea6930575d303e9ea7363c22263cad7cd11e86611540794c5fd1ab49c3d42296b570ca7ed69104186616a87152992e.js"
  integrity="sha512-SInKSx7CuSgNYI5CjP4yPhDqaTBXXTA&#43;nqc2PCImPK180R6GYRVAeUxf0atJw9QilrVwyn7WkQQYZhaocVKZLg=="></script>



<script type="text/plain" cookie-consent="tracking">
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-131031623-1', 'auto');
            ga('send', 'pageview');
        </script>


<script type="text/plain" cookie-consent="targeting">
    /* Hotjar Tracking Code for https://preslav.me */
(function (h, o, t, j, a, r) {
    h.hj =
      h.hj ||
      function () {
        (h.hj.q = h.hj.q || []).push(arguments);
      };
    h._hjSettings = { hjid: 1770517, hjsv: 6 };
    a = o.getElementsByTagName("head")[0];
    r = o.createElement("script");
    r.async = 1;
    r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;
    a.appendChild(r);
  })(window, document, "https://static.hotjar.com/c/hotjar-", ".js?sv=");
</script>

<script async type="text/plain" cookie-consent="functionality"
  src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<noscript><a href="https://www.FreePrivacyPolicy.com/cookie-consent/">Cookie
    Consent by Free Privacy Policy Generator</a></noscript>


<script src="https://kindmetrics.io/js/track.js" defer="true"
  data-domain="preslav.me"></script>
</body>

</html>